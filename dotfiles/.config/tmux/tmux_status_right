#!/bin/sh

HOSTNAME=''

WIDTH=${1}

SMALL=40
MEDIUM=80

if [ "${POWERLINE_FONTS:-1}" -eq 0 ]; then
    SEP=''
    SEPE='|'
    SP=''
else
    SEP=''
    SEPE=''
    SP=' '
fi

if [ "$WIDTH" -gt "$MEDIUM" ]; then
    CPUTEMP="#[fg=green,bg=default,nobold,noitalics,nounderscore]$($HOME/.config/tmux/_cputemp)"
    DATE="#[fg=colour236,bg=${date_colour:-default},nobold,noitalics,nounderscore]$SEP#[fg=colour247,bg=colour236,nobold,noitalics,nounderscore] $(date +'%D')"
    TIME="#[fg=colour241,bg=colour236,nobold,noitalics,nounderscore]$SEPE #[fg=colour252,bg=colour236,noitalics,nounderscore]$(date +'%H:%M')"
    LOAD="#[fg=colour241,bg=default,nobold,noitalics,nounderscore]$SEPE$S #[fg=green,bg=default,nobold,noitalics,nounderscore]$($HOME/.config/tmux/_memusage)"
    UPTIME="#[fg=yellow,bg=default,nobold,noitalics,nounderscore]$($HOME/.config/tmux/_uptime)"
fi


if [ "$WIDTH" -ge "$SMALL" ]; then
    USER="#[fg=colour31,bg=colour236,nobold,noitalics,nounderscore]$SEP#[fg=colour231,bg=colour31,bold,noitalics,nounderscore] $(whoami)"
    UNAME="#[fg=colour252,bg=colour31,nobold,noitalics,nounderscore]$SEP#[fg=colour16,bg=colour252,bold,noitalics,nounderscore] $HOSTNAME $(uname -n)"
fi

# Final formatting
[ "$CPUTEMP" -gt 0 ] && CPUTEMP="$CPUTEMP°" || CPUTEMP=""

echo "$UPTIME $CPUTEMP $LOAD $DATE $TIME $USER $UNAME " # | sed 's/ *$/ /g'

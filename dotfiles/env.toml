# vim: fdm=marker fdl=1:
#                  _                  _
#   ___ _ ____   _| |_ ___  _ __ ___ | |
#  / _ \ '_ \ \ / / __/ _ \| '_ ` _ \| |
# |  __/ | | \ V /| || (_) | | | | | | |
#  \___|_| |_|\_(_)\__\___/|_| |_| |_|_|
#
# SHELL ENVIRONMENT CONFIG
# Path {{{1
# go {{{2
[[path]]
key = ''
val = 'usr/local/go/bin'
args = '-U --path'

[[path]]
key = ''
val = '$HOME/go/bin'
args = '-Up --path'

# fzf {{{2
[[path]]
key = ''
val = '$HOME/.fzf/bin'
args = '-Up --path'
host = 'thor.local'

# user directories {{{2
[[path]]
key = ''
val = '$HOME/bin'
args = '-Up --path'

[[path]]
key = ''
val = '$HOME/git/python/shell'
args = '-Up --path'

# shell directories {{{2
[[path]]
key = ''
val = '$XDG_CONFIG_HOME/bash/functions'
shell = ['bash']

[[path]]
key = ''
val = '$XDG_CONFIG_HOME/zsh/functions'
shell = ['zsh']

[[path]]
key = ''
val = '$XDG_CONFIG_HOME/shell/functions'
args = '-Up --path'
desc = 'General shell scripts common to all shells'

# path config {{{2
# NOTE: all path entries must be defined before this line
[[env]]
key = 'PATH'
val = '''$(echo -n $PATH | awk -v RS=: -v ORS=: '!x[$0]++' | sed "s/\(.*\).\{1\}/\1/")'''
shell = ['bash','zsh']
desc = 'De-duplicate path variable'

# Environment Variables {{{1
# general system {{{2
[[env]]
key = 'XDG_CONFIG_HOME'
val = '$HOME/.config'
cat = 'system'

[[env]]
key = 'XDG_CACHE_HOME'
val = '$HOME/.cache'
cat = 'system'

[[env]]
key = 'XDG_DATA_HOME'
val = '$HOME/.local'
cat = 'system'

[[env]]
key = 'LC_ALL'
val = 'en_US.utf-8'
cat = 'system'
desc = 'Default encoding'

[[env]]
key = 'BROWSER'
val = 'w3m'
cat = 'system'
desc = 'Text-based browser'

[[env]]
key = 'CDG_PATH'
val = [
    "$HOME/git/python",
    "$HOME/dotfiles/dotfiles",
    "$HOME/.vim",
    "$HOME/.vim/config",
    "$XDG_CONFIG_HOME/fish",
    "$XDG_CONFIG_HOME/fish/functions",
    "$XDG_CONFIG_HOME/fish/completions",
    "$XDG_CONFIG_HOME/fish/conf.d",
]
cat = 'system'
shell = ['fish']
desc = 'Directories for cdg function (bookmarks)'

# preferences {{{2
[[env]]
key = 'CLICOLOR'
val = 1
cat = 'preferences'
desc = 'Use colors in prompt'

[[env]]
key = 'NERD_FONTS'
val = 1
cat = 'preferences'
desc = 'Use glyphs in Vim'

[[env]]
key = 'LS_AFTER_CD'
val = 1
cat = 'preferences'
desc = 'Use snippet in conf.d to echo dir after $PWD change'

# todo.txt {{{2
[[env]]
key = 'TODOTXT_CFG_FILE'
val = '$HOME/Dropbox/todo/todo.cfg'
cat = 'todo.txt'
desc = 'todo.txt config directory'

# fish {{{2
[[env]]
key = 'FISH_PKG_MGR'
val = 'FUNDLE'
cat = 'fish'
shell = ['fish']

[[env]]
key = 'FISH_PLUGIN_PATH'
val = '$XDG_DATA_HOME/fish_plugins'
cat = 'fish'
shell = ['fish']
desc = 'Plugin path for manual install'

[[env]]
key = 'FISH_THEME'
val = 'yimmy'
cat = 'fish'
shell = ['fish']

[[env]]
key = 'FISH_SSH_THEME'
val = 'yimmy'
cat = 'fish'
shell = ['fish']

# python {{{2
[[env]]
key = 'VIRTUAL_ENV_DISABLE_PROMPT'
val = 1
cat = 'python'
shell = ['fish']
desc = 'Disable default venv prompt'

[[env]]
key = 'VENV_DIR'
val = '$HOME/.env'
cat = 'python'
desc = 'Python virtual env directory'

[[env]]
key = 'def_venv'
val = '$VENV_DIR/dev'
cat = 'python'
desc = 'Default venv directory'

[[env]]
key = 'NVIM_PY2_DIR'
val = '$HOME/.env/nvim2/bin/python'
cat = 'python'
desc = 'Neovim Python 2 venv'

[[env]]
key = 'NVIM_PY3_DIR'
val = '$HOME/.env/nvim3/bin/python'
cat = 'python'
desc = 'Neovim Python 3 venv'

# vim {{{2
[[env]]
key = 'VISUAL'
val = 'nvim'
cat = 'vim'
shell = ['bash','zsh']
desc = 'Default visual text editor'

[[env]]
key = 'EDITOR'
val = '$VISUAL'
cat = 'vim'
shell = ['bash','zsh']
desc = 'Default terminal text editor'

[[env]]
key = 'VIM_COLOR'
val = 'PaperColor-dark'
cat = 'vim'
desc = 'Vim color theme'

[[env]]
key = 'NVIM_COLOR'
val = 'PaperColor-dark'
cat = 'vim'
desc = 'Neovim color theme'

# fzf {{{2
[[env]]
key = 'FZF_TMUX'
val = 1
cat = 'fzf'
desc = 'Use FZF for TMUX'

[[env]]
key = 'FZF_TMUX_HEIGHT'
val = '30%'
cat = 'fzf'
desc = 'Panel height for FZF TMUX'

[[env]]
key = 'FZF_LEGACY_KEYBINDINGS'
val = 0
cat = 'fzf'
shell = ['fish']
desc = 'Use legacy Fish FZF keybindings'

[[env]]
key = 'FZF_CTRL_T_COMMAND'
val = 'command find -L $dir -type f 2> /dev/null | sed "1d; s#^\./##"'
cat = 'fzf'
shell = ['fish']
desc = 'Commandline completion command'
quote = true

# go {{{2
[[env]]
key = 'GOPATH'
val = '$HOME/go'
cat = 'go'
desc = 'golang path folder'

# Abbreviations/Aliases {{{1
# misc apps {{{2
[[abbr]]
key = 'xo'
val = 'xonsh'
cat = 'misc'
desc = 'Open xonsh shell'

[[abbr]]
key = 'lp'
val = 'lpass'
cat = 'misc'
desc = 'LastPass cli'

[[abbr]]
key = 'vcp'
val = 'vcprompt -f "%b %r %p %u %m"'
cat = 'misc'
desc = 'Fast git status using C'
quote = true

[[abbr]]
key = 'vw'
val = 'view'
cat = 'misc'
desc = 'Call view function'

[[abbr]]
key = 'z'
val = 'j'
cat = 'misc'
desc = 'Use autojump (j) instead of z'

# git {{{2
[[abbr]]
key = 'g'
val = 'git'
cat = 'git'

[[abbr]]
key = 'ga'
val = 'git add'
cat = 'git'
quote = true

[[abbr]]
key = 'gc'
val = 'git commit'
cat = 'git'
quote = true

[[abbr]]
key = 'gpl'
val = 'git pull'
cat = 'git'
quote = true

[[abbr]]
key = 'gph'
val = 'git push'
cat = 'git'
quote = true

[[abbr]]
key = 'gs'
val = 'git show'
cat = 'git'
quote = true

[[abbr]]
key = 'gcp'
val = 'git commit && git push'
cat = 'git'
quote = true

[[abbr]]
key = 'gac'
val = 'git add . && git commit'
cat = 'git'
quote = true

[[abbr]]
key = 'gsync'
val = 'git pull && git add . && git commit && git push'
cat = 'git'
quote = true

[[abbr]]
key = 'gco'
val = 'git checkout master'
cat = 'git'
quote = true

[[abbr]]
key = 'gcol'
val = 'git checkout (git describe --tags)'
cat = 'git'
shell = ['fish']
quote = true

[[abbr]]
key = 'gd'
val = 'git diff'
cat = 'git'
quote = true

[[abbr]]
key = 'gdf'
val = 'git diff'
cat = 'git'
quote = true

[[abbr]]
key = 'gdiff'
val = 'git diff'
cat = 'git'
quote = true

[[abbr]]
key = 'gst'
val = 'git status -s'
cat = 'git'
desc = 'Short git status format'
quote = true

[[abbr]]
key = 'glog'
val = 'vim +GV'
cat = 'git'
desc = 'Open interactive git log in vim'
quote = true

[[abbr]]
key = 'grst'
val = 'git reset --hard origin/master'
cat = 'git'
desc = 'Overwrite local repo with remote'
quote = true

[[abbr]]
key = 'gsub'
val = 'git submodule foreach --recursive git pull origin master'
cat = 'git'
desc = 'Update all submodules recursively'
quote = true

[[abbr]]
key = 'gunst'
val = 'git reset HEAD'
cat = 'git'
desc = 'Unstage file'
quote = true

[[abbr]]
key = 'grmi'
val = 'git rm --cached'
cat = 'git'
desc = 'Remove from git index but keep local filesystem copy'
quote = true

# directories {{{2
# general {{{3
[[abbr]]
key = 'h'
val = "$HOME"
cat = 'dirs'

# git repos {{{3
[[abbr]]
key = 'gpy'
val = '$HOME/git/python'
cat = 'dirs'

[[abbr]]
key = 'gpython'
val = '$HOME/git/python'
cat = 'dirs'

[[abbr]]
key = 'pysh'
val = '$HOME/git/python/shell'
cat = 'dirs'

[[abbr]]
key = 'ggas'
val = '$HOME/git/google-apps-script/'
cat = 'dirs'

[[abbr]]
key = 'gdspw'
val = '$HOME/git/google-apps-script/sheets/dspw'
cat = 'dirs'

[[abbr]]
key = 'gfst'
val = '$HOME/git/google-apps-script/sheets/fs-time-dev'
cat = 'dirs'

# dotfiles {{{3
[[abbr]]
key = 'dot'
val = '$HOME/dotfiles/dotfiles'
cat = 'dirs'

[[abbr]]
key = 'gdot'
val = '$HOME/dotfiles/dotfiles'
cat = 'dirs'

[[abbr]]
key = 'vdot'
val = '$HOME/dotfiles/dotfiles/.vim'
cat = 'dirs'

[[abbr]]
key = 'vico'
val = '$HOME/dotfiles/dotfiles/.vim/config'
cat = 'dirs'

# fish config {{{3
[[abbr]]
key = 'fc'
val = '$__fish_config_dir'
cat = 'dirs'
shell = ['fish']
desc = 'Fish dir in $XDG_CONFIG_HOME'

[[abbr]]
key = 'ffn'
val = '$__fish_config_dir/functions'
cat = 'dirs'
shell = ['fish']
desc = 'Fish user functions dir'

[[abbr]]
key = 'fcm'
val = '$__fish_config_dir/completions'
cat = 'dirs'
shell = ['fish']
desc = 'Fish user completions dir'

[[abbr]]
key = 'fcd'
val = '$__fish_config_dir/conf.d'
cat = 'dirs'
shell = ['fish']
desc = 'Fish user config snippets'

# bash config {{{3
[[abbr]]
key = 'bcd'
val = '$XDG_CONFIG_HOME/bash/conf.d'
cat = 'dirs'
shell = ['bash']
desc = 'Bash snippets dir'

[[abbr]]
key = 'bfd'
val = '$XDG_CONFIG_HOME/bash/functions'
cat = 'dirs'
shell = ['bash']
desc = 'Bash functions dir'

# zsh config {{{3
[[abbr]]
key = 'zcd'
val = '$XDG_CONFIG_HOME/zsh'
cat = 'dirs'
shell = ['zsh']
desc = 'Zsh config dir'

[[abbr]]
key = 'zfd'
val = '$XDG_CONFIG_HOME/zsh/functions'
cat = 'dirs'
shell = ['zsh']
desc = 'Zsh functions dir'

# shell {{{3
[[abbr]]
key = 'sfd'
val = '$XDG_CONFIG_HOME/shell/functions'
cat = 'dirs'
desc = 'Common shell functions dir'

[[abbr]]
key = 'scd'
val = '$XDG_CONFIG_HOME/shell/conf.d'
cat = 'dirs'
desc = 'Common shell snippets dir'

# commands {{{2
# general {{{3
[[abbr]]
key = '-'
val = 'cd'
cat = 'cmds'
shell = ['fish']


[[abbr]]
key = 'pd'
val = 'prevd'
cat = 'cmds'
shell = ['fish']
desc = 'cd to previous dir'

[[abbr]]
key = 'nd'
val = 'nextd'
cat = 'cmds'
shell = ['fish']
desc = 'cd to next dir'

[[abbr]]
key = 'rmdir'
val = 'rm -rf'
cat = 'cmds'
desc = 'Remove directory and contents recursively'
quote = true

[[abbr]]
key = 'version'
val = 'cat /etc/os-release'
cat = 'cmds'
desc = 'View linux version'
quote = true

[[abbr]]
key = 'lookbusy'
val = 'cat /dev/urandom | hexdump -C | grep --color "ca fe"'
cat = 'cmds'
desc = 'Displays a lot of TV-like code on the screen'
quote = true

[[abbr]]
key = 'mntp'
val = 'sudo mount -t drvfs P: /mnt/p'
cat = 'cmds'
desc = 'Mount P: drive'
quote = true

# ls {{{3
[[abbr]]
key = 'ls'
val = 'ls -h --color=auto --group-directories-first'
cat = 'ls'
shell = ['bash','zsh']
desc = 'List all files'
quote = true

[[abbr]]
key = 'lsa'
val = 'ls -ah'
cat = 'ls'
desc = 'List all files'
quote = true

[[abbr]]
key = 'la'
val = 'ls -ah'
cat = 'ls'
desc = 'List all files'
quote = true

[[abbr]]
key = 'll'
val = 'ls -lh'
cat = 'ls'
desc = 'List files in long format'
quote = true

[[abbr]]
key = 'lla'
val = 'ls -lah'
cat = 'ls'
desc = 'List all files in long format'
quote = true

# exit {{{3
[[abbr]]
key = 'x'
val = 'exit'
cat = 'cmds'

[[abbr]]
key = 'q'
val = 'exit'
cat = 'cmds'

[[abbr]]
key = 'quit'
val = 'exit'
cat = 'cmds'

# chmod {{{3
[[abbr]]
key = 'che'
val = 'chmod +x'
cat = 'cmds'
desc = 'Assign execute permission for current user to file'
quote = true

[[abbr]]
key = 'chr'
val = 'chmod 755'
cat = 'cmds'
desc = 'Assign standard permission to file'
quote = true

# fzf {{{3
[[abbr]]
key = 'fp'
val = "fzf-tmux --reverse --preview 'cat {} --color=always'"
cat = 'cmds'
quote = true

[[abbr]]
key = 'p'
val = 'fzf_cdhist'
cat = 'cmds'
shell = ['fish']
desc = 'FZF widget for cd history'

[[abbr]]
key = 'cdf'
val = '__fzf_cd'
cat = 'cmds'
shell = ['fish']
desc = 'Use FZF to search for directory and CD'

# powerline {{{3
[[abbr]]
key = 'pr'
val = 'powerline-daemon --replace'
cat = 'cmds'
desc = 'Restart powerline daemon'
quote = true

# list.py {{{3
[[abbr]]
key = 'l'
val = 'list'
cat = 'cmds'
desc = 'list.py'
quote = true

[[abbr]]
key = 'lso'
val = 'list -hO'
cat = 'cmds'
shell = ['fish']
desc = 'Dir listing, human readable with octal permissions'
quote = true

[[abbr]]
key = 'listd'
val = 'list --debug'
cat = 'cmds'
desc = 'Debug list.py'
quote = true

[[abbr]]
key = 'listh'
val = 'list --help'
cat = 'cmds'
desc = 'Help for list.py'
quote = true

# todo.txt {{{3
[[abbr]]
key = 't'
val = 'todo'
cat = 'cmds'
desc = 'todo.sh'

[[abbr]]
key = 'tp'
val = 'topydo'
cat = 'cmds'
desc = 'topydo.py'

# tmux {{{3
[[abbr]]
key = 'te'
val = "vim $HOME/.tmux.conf && tmux source ~/.tmux.conf && tmux display '~/.tmux.conf sourced'"
cat = 'cmds'
desc = 'Open ~/.tmux.conf and reload after editing'
quote = true

[[abbr]]
key = 'tl'
val = 'tmux ls'
cat = 'cmds'
desc = 'List tmux sessions'
quote = true

# vim {{{3
[[abbr]]
key = 'v'
val = 'vim'
cat = 'cmds'

[[abbr]]
key = 'n'
val = 'nvim'
cat = 'cmds'

[[abbr]]
key = 'nv'
val = 'nvim'
cat = 'cmds'

[[abbr]]
key = 'vvim'
val = 'command vim'
cat = 'cmds'
desc = 'Open vim executable'
quote = true

[[abbr]]
key = 'vv'
val = 'command vim'
cat = 'cmds'
desc = 'Open vim executable'
quote = true

[[abbr]]
key = 'vf'
val = 'vim (eval (__fzfcmd))'
cat = 'cmds'
shell = ['fish']
desc = 'Open fzf search result in vim'
quote = true

[[abbr]]
key = 'vet'
val = 'vim $HOME/dotfiles/dotfiles/env.toml'
cat = 'cmds'
desc = 'Open env.toml in vim'
quote = true
#
# fish shell {{{3
[[abbr]]
key = 'frel'
val = 'exec fish'
cat = 'cmds'
shell = ['fish']
desc = 'Reload fish shell'
quote = true

[[abbr]]
key = 'frec'
val = 'clear; and exec fish'
cat = 'cmds'
shell = ['fish']
desc = 'Clear terminal and reload fish shell'
quote = true

[[abbr]]
key = 'funced'
val = 'funced -s'
cat = 'cmds'
shell = ['fish']
desc = 'Save function after editing'
quote = true

[[abbr]]
key = 'cm'
val = 'command'
cat = 'cmds'
shell = ['fish']
desc = 'Equivalent to `\` in bash'

[[abbr]]
key = 'fcf'
val = "vim $__fish_config_dir/config.fish"
cat = 'cmds'
shell = ['fish']
desc = 'Edit config.fish in vim'

[[abbr]]
key = 'del'
val = 'history delete'
cat = 'cmds'
shell = ['fish']
desc = 'Delete history matching pattern'
quote = true

[[abbr]]
key = 'dlast'
val = 'history delete $history[1] --exact --case-sensitive'
cat = 'cmds'
shell = ['fish']
desc = 'Delete last history item'
quote = true

[[abbr]]
key = 'path'
val = 'set -S PATH'
cat = 'cmds'
shell = ['fish']
desc = 'Print details of PATH variable'
quote = true

# bash {{{3
[[abbr]]
key = 'brc'
val = 'vim ~/.bashrc'
cat = 'cmds'
desc = 'Open bashrc in vim'
quote = true

# zsh {{{3
[[abbr]]
key = 'zshc'
val = 'vim ~/.zshrc'
cat = 'cmds'
desc = 'Open zshrc in vim'
quote = true

[[abbr]]
key = 'zrel'
val = 'relz'
cat = 'cmds'
shell = ['zsh']
desc = 'Reload zsh config'

# python {{{3
[[abbr]]
key = 'denv'
val = 'source $def_venv/bin/activate.fish'
cat = 'cmds'
shell = ['fish']
desc = 'Activate default Python venv'
quote = true

[[abbr]]
key = 'denv'
val = 'source $def_venv/bin/activate'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Activate default Python venv'
quote = true

# Aliases Only {{{1
# git {{{2
[[alias]]
key = 'git'
val = 'hub'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Wrapper for git with extra GitHub features'

# grep {{{2
[[alias]]
key = 'grep'
val = 'grep --color=auto'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Color default for grep'

[[alias]]
key = 'fgrep'
val = 'fgrep --color=auto'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Color default for fgrep'

[[alias]]
key = 'egrep'
val = 'egrep --color=auto'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Color default for grep'

# vim {{{3
[[alias]]
key = 'vim'
val = '$VISUAL'
cat = 'cmds'
shell = ['bash','zsh']
desc = 'Alias vim or nvim to `vim` command'
